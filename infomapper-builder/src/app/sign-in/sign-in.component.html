<div class="main-container">
  <div class="display-container">

    <div class="sign-in-main-container">
      <form [formGroup]="signInFG" class="sign-in-form-group-container">

        <div class="mat-form-fields-container">

          <span class="log-in-title">InfoMapper Builder Login</span>

          <div class="sign-in-title">InfoMapper Account</div>

          <mat-form-field appearance="outline">
            <mat-select name="account-selection" (openedChange)="openSelectChange()">
              <cdk-virtual-scroll-viewport [itemSize]="48" [minBufferPx]="540"
              [maxBufferPx]="540" [style.height.px]="240">

                <!-- Prevent a user pressed space key from acting as a selection option. -->
                <input matInput formControlName="accountType" placeholder="Search accounts"
                (keydown)="$event.stopPropagation()" class="input-search"
                (keyup)="searchForAccount($event)" #searchInput/>

                <mat-option *cdkVirtualFor="let account of displayAccounts"
                (onSelectionChange)="paramAccountSelected($event, account)"
                [value]="account.values.name" [style.height.px]="48">
                  {{ account.values.name }}
                </mat-option>

              </cdk-virtual-scroll-viewport>
            </mat-select>
          </mat-form-field>

          <div class="sign-in-title">Username or Email</div>

          <mat-form-field appearance="outline">
            
            <input matInput formControlName="user" attr.data-cy="TODO">
      
            <mat-error>
              <ng-container *ngFor="let error of formErrors(signInFG.get('user'))">
                {{ formErrorMessages[error] }} <br>
              </ng-container>
            </mat-error>
          </mat-form-field>
    
          <div class="sign-in-title">Password</div>

          <mat-form-field appearance="outline">
            
            <div class="pw-input-container">
              <input matInput [type]="visibleInput ? 'text' : 'password'" formControlName="password"
              attr.data-cy="TODO"/>
              <fa-icon [icon]="visibilityIcon" size="lg" [matTooltip]="visibilityMessage"
              (click)="togglePasswordVisibility()" class="visibility-icon">
              </fa-icon>
            </div>

            <mat-error>
              <ng-container *ngFor="let error of formErrors(signInFG.get('password'))">
                {{ formErrorMessages[error] }} <br>
              </ng-container>
            </mat-error>
          </mat-form-field>

          <button mat-stroked-button (click)="signInUser()" [disabled]="signInFG.invalid"
          class="sign-in-button">
            Sign In
          </button>

        </div>

      </form>
    </div>

  </div>
</div>