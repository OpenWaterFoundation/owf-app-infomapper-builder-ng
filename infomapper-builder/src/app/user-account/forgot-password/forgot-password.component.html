<div class="main-container">
  <div class="display-container">

    <div class="forgot-main-container">

      <h1 class="recovery-title">Password Reset</h1>

      <div *ngIf="initialRecovery" class="recovery-container">
        <form class="forgot-password-form-container" [formGroup]="forgotPasswordFG">

          <span>Username or Email</span>
          <mat-form-field appearance="outline">
      
            <div class="pw-input-container">
              <input matInput formControlName="username" attr.data-cy="TBD"/>
            </div>
        
            <mat-error>
              <ng-container *ngFor="let error of formErrors(forgotPasswordFG.get('username'))">
                {{ formErrorMessages[error] }}<br>
              </ng-container>
            </mat-error>
          </mat-form-field>
  
        </form>
  
        <button mat-stroked-button [disabled]="isUsernameInvalid()" (click)="recoverPassword()">
          Send email to recover my password
        </button>
      </div>
      
      <div *ngIf="!initialRecovery" class="recovery-container">
        <form class="forgot-password-form-container" [formGroup]="forgotPasswordFG">

          <span>Verification code</span>
          <mat-form-field appearance="outline" >
      
            <div class="pw-input-container">
              <input matInput formControlName="verificationCode" attr.data-cy="TBD" placeholder="123456"/>
            </div>
        
            <mat-error>
              <ng-container *ngFor="let error of formErrors(forgotPasswordFG.get('verificationCode'))">
                {{ formErrorMessages[error] }}<br>
              </ng-container>
            </mat-error>
          </mat-form-field>

          <span>New password</span>
          <mat-form-field appearance="outline">

            <div class="pw-input-container">
              <input matInput [type]="visibleInput ? 'text' : 'password'" formControlName="newPassword"
              attr.data-cy="TBD"/>
              <fa-icon [icon]="visibilityIcon" size="lg" [matTooltip]="visibilityMessage"
              (click)="toggleIconVisibility()" class="visibility-icon">
              </fa-icon>
            </div>
        
            <mat-error>
              <ng-container *ngFor="let error of formErrors(forgotPasswordFG.get('newPassword'))">
                {{ formErrorMessages[error] }}<br>
              </ng-container>
            </mat-error>
          </mat-form-field>
  
        </form>
  
        <button mat-stroked-button [disabled]="isPasswordInvalid()" (click)="confirmRecoverPassword()">
          Set new password
        </button>
      </div>

    </div>

  </div>
</div>