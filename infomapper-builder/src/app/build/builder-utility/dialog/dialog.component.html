<!-- Use for keeping the entire dialog in the app window. cdkDragBoundary=".cdk-overlay-container" -->
<div cdkDrag cdkDragRootElement=".cdk-overlay-pane"
class="cdk-drag">
  <div mat-dialog-title class="drag-header-main" cdkDragHandle
  data-cy="dialog-drag-header-main">

    <div class="header">
      <p class="header-title">
        {{ node.level }}: {{ headerText }}
      </p>
    </div>

    <button mat-button (click)="closeDialog()" class="upper-dialog-close-button"
    attr.data-cy="dialog-upper-close-NEEDS-TO-BE-CHANGED">
      <fa-icon [icon]="faXmark" size="xl"></fa-icon>
    </button>
  </div>

  <div class="dialog-content">
    
    <ng-container *ngIf="node.level === 'Application'">
      <app-config [appBuilderForm]="appBuilderForm" [node]="node"
      (updateTitleInput)="updateHeaderText($event)">
      </app-config>
    </ng-container>

    <ng-container *ngIf="node.level === 'Datastore'">
      <datastore-config [appBuilderForm]="appBuilderForm" [node]="node"
      (updateTitleInput)="updateHeaderText($event)">
      </datastore-config>
    </ng-container>
    
    <ng-container *ngIf="node.level === 'Main Menu'">
      <main-menu-config [appBuilderForm]="appBuilderForm" [node]="node"
      (updateTitleInput)="updateHeaderText($event)">
      </main-menu-config>
    </ng-container>

    <ng-container *ngIf="node.level === 'SubMenu'">
      <sub-menu-config [appBuilderForm]="appBuilderForm" [node]="node"
      (updateTitleInput)="updateHeaderText($event)">
      </sub-menu-config>
    </ng-container>
    
    
  </div>

  <div class="dialog-utility-container">

    <button mat-raised-button (click)="closeDialog()" class="dialog-cancel-button"
    attr.data-cy="dialog-lower-cancel-NEEDS-TO-BE-CHANGED">
      Cancel
    </button>

    <button mat-raised-button (click)="saveData(node)"
    [disabled]="isSaveDisabled()"
    class="dialog-save-button" attr.data-cy="dialog-lower-save-NEEDS-TO-BE-CHANGED">
      Save
    </button>

  </div>

</div>
